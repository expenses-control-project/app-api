generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuarios {
  idUsuario Int    @id @default(autoincrement())
  name      String
  email     String
  password  String
}

model Cuentas {
  idCuenta     Int       @id @default(autoincrement())
  nombre       String
  saldo        Float
  ingresoList  Ingresos[]
  idGasto      Int?
  gasto        Gastos?    @relation(fields: [idGasto], references: [idGasto])
}

model Establecimientos {
  idEstablecimiento      Int       @id @default(autoincrement())
  nombreEstablecimiento  String
  idRubro                Int?
  rubro                  Rubros?    @relation(fields: [idRubro], references: [idRubro])
  gastoList              Gastos[]
}

model Gastos {
  idGasto          Int             @id @default(autoincrement())
  monto            Float
  fecha            DateTime
  idEstablecimiento Int?
  establecimiento  Establecimientos? @relation(fields: [idEstablecimiento], references: [idEstablecimiento])
  cuentaList       Cuentas[]
  movimientoList   Movimientos[]
}

model Ingresos {
  idIngreso      Int     @id @default(autoincrement())
  saldo          Float
  idCuenta       Int?
  cuenta         Cuentas? @relation(fields: [idCuenta], references: [idCuenta])
  movimientoList Movimientos[]
}

model Rubros {
  idRubro             Int               @id @default(autoincrement())
  nombreRubro         String
  total               Float
  establecimientoList Establecimientos[]
}

model Movimientos {
  idMovimiento     Int    @id @default(autoincrement())
  nombreMovimiento String
  idGasto          Int?
  idIngreso        Int?
  esGasto          Boolean
  esIngreso        Boolean
  ingreso          Ingresos? @relation(fields: [idIngreso], references: [idIngreso])
  gasto            Gastos? @relation(fields: [idGasto], references: [idGasto])
}


